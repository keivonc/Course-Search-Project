<!-- Need to connect enter key to search bar -->
<!-- Need to make search bar case insensitive -->

{% extends 'base.html' %}
{% load socialaccount %}
{% block content %}


<head>
    <style>
        .searchagain {
            padding-bottom: 2em;
            padding-top: 1em;
        }
    </style>

</head>

<html>
<div class="container">
    

    <div>
        <h5>Friends</h5>
        {%if object_list%}

        <div class='accordion' id="{{profile.user.username}}">
            {% for profile in object_list %}
            <div class='accordion-item'>
                <h2 class="accordion-header" id="{{ profile.user.username }}">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapse{{forloop.counter}}" aria-expanded="true"
                        aria-controls="collapse{{forloop.counter}}">
                        <h5>{{profile.user.first_name}} {{profile.user.last_name}} ({{profile.user.username}})</h5>
                        
                    </button>
                    
                </h2>

                <div id="collapse{{forloop.counter}}" class="accordion-collapse collapse" aria-labelledby="headingOne"
                    data-bs-parent="#{{profile.user.username}}">
                    <div class="accordion-body">
                        <form class="mb-2" action="{% url 'unfriend_user' %}" method="post">
                            {% csrf_token %}
                            
                            <button class="btn btn-outline-primary py-1" name="username" type="submit"
                                value={{profile.user.username}}>Unfriend User</button>
                        </form>
                        {%if profile.saved_courses == None%}
                        <p>This user doesn't have any saved courses</p>
                        {%else%}
                        <ul>
                            {%for section in profile.saved_sections.all%}

                            <li>{{section.course}} ({{section.course_section}})</li>
                            {%endfor%}
                        </ul>
                        {%endif%}
                    </div>
                </div>
                {% comment %} {{ profile.user.username }}, {{profile.user.email}}, {{ profile.year }} {% endcomment %}
            </div>
            {% endfor %}
        </div>
        {%else%}
        <p class="text-danger">No results, please try a different search.</p>
        {% endif%}


    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>




</html>

{% endblock content %}